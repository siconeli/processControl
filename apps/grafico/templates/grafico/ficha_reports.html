{% extends 'core/inicio.html' %}

{% load static %}

{% block titulo %}
    <title>Relatórios</title>
{% endblock %}

{% block conteudo %}
    <div class="p-4" id="style_containers">
        <div class="card" id="card-processos">
            <div class="card-header text-white" style="background-color: #5c5c5c;">
                <div class="row">
                    <div class="col">
                        <a href="{% url 'processo-list' %}"><button type="button"  style="border-radius: 4px; background-color: #a19f9f; color: white;"><b>Voltar</b></button></a>
                    </div>
                    <div class="col">
                        <h4 style="text-align: right;">Relatórios</h4>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <div class="card" style="width: 500px; margin: 0 auto;">
                        <div class="card-header text-white" style="background-color: #5c5c5c;">
                            <h4 style="text-align: center;">Relatório de gráficos - Mensal</h4>
                        </div>
                        <br>
                        <div class="row" style="margin: 0cm;">
                            <form method="get" action="{% url 'relatorio-grafico' %}" target="_blank">

                                <div>
                                    <label for="modelo">Modelo</label>
                                    <select name="modelo" id="modelo">
                                        <option value="1">Mensal</option> <!--Default-->
                                        <option value="2">Anual</option>
                                    </select>
                                </div>
                                <br><br>
                                <div>
                                    <label for="municipio">Município</label>
                                    <select name="municipio" id="municipio" required>
                                        <option value="">-------------</option>
                                        {% for m in municipios %}
                                            <option value="{{ m.pk }}" {% if m.pk|stringformat:"s" == request.GET.municipio|stringformat:"s" %} selected {% endif %}>{{ m.nome }}</option>
                                        {% endfor %}
                                    </select>
                                    
                                    <label for="receita">Receita</label>
                                    <select name="receita" id="receita" required>
                                        <option value="">-------------</option>
                                        {% for r in receitas %}
                                            <option value="{{ r.pk }}" {% if r.pk|stringformat:"s" == request.GET.receita|stringformat:"s" %} selected {% endif %}>{{ r.nome }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <br><br>

                                <div>
                                    <label for="ano_1">Ano</label>
                                    <select name="ano_1" id="ano_1" required>
                                        <option value="">-------------</option>
                                        {% for a in anos %}
                                            <option value="{{ a.pk }}" {% if a.pk|stringformat:"s" == request.GET.ano|stringformat:"s" %} selected {% endif %}>{{ a.nome }}</option>
                                        {% endfor %}
                                    </select>

                                    <label for="ano">Ano</label>
                                    <select name="ano_2" id="ano_2" required>
                                        <option value="">-------------</option>
                                        {% for a in anos %}
                                            <option value="{{ a.pk }}" {% if a.pk|stringformat:"s" == request.GET.ano|stringformat:"s" %} selected {% endif %}>{{ a.nome }}</option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <br><br>

                                <div>
                                    <label for="mes_1">Mês</label>
                                    <select name="mes_1" id="mes_1">
                                        <option value="janeiro" selected>Janeiro</option>
                                        <option value="fevereiro">Fevereiro</option>
                                        <option value="marco">Março</option>
                                        <option value="abril">Abril</option>
                                        <option value="maio">Maio</option>
                                        <option value="junho">Junho</option>
                                        <option value="julho">Julho</option>
                                        <option value="agosto">Agosto</option>
                                        <option value="setembro">Setembro</option>
                                        <option value="outubro">Outubro</option>
                                        <option value="novembro">Novembro</option> 
                                        <option value="dezembro">Dezembro</option> 
                                    </select>
                                    
                                    <label for="mes_2">Mês</label>
                                    <select name="mes_2" id="mes_2">
                                        <option value="janeiro">Janeiro</option>
                                        <option value="fevereiro">Fevereiro</option>
                                        <option value="marco">Março</option>
                                        <option value="abril">Abril</option>
                                        <option value="maio">Maio</option>
                                        <option value="junho">Junho</option>
                                        <option value="julho">Julho</option>
                                        <option value="agosto">Agosto</option>
                                        <option value="setembro">Setembro</option>
                                        <option value="outubro">Outubro</option>
                                        <option value="novembro">Novembro</option> 
                                        <option value="dezembro" selected>Dezembro</option> 
                                    </select>
                                </div>

                                <br><br>

                                <button type="submit"  id="btnGerarRelatorio2" style="border-radius: 4px;"><b>Gerar</b></button>
                            </form>
                            <br>
                        </div>
                        <br>
                    </div>
                </div>
            </div>
            <br>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var filtro_rel_1 = document.getElementById("filtro_rel_1");
            var btnGerarRelatorio1 = document.getElementById("btnGerarRelatorio1"); 

            var filtro_rel_2 = document.getElementById("filtro_rel_2");
            var btnGerarRelatorio2 = document.getElementById("btnGerarRelatorio2");

            function verificarFiltro1() {
                btnGerarRelatorio1.disabled = filtro_rel_1.value === "";
            }

            function verificarFiltro2() {
                btnGerarRelatorio2.disabled = filtro_rel_2.value === "";
            }

            verificarFiltro1();
            verificarFiltro2();

            filtro_rel_1.addEventListener("change", verificarFiltro1);
            filtro_rel_2.addEventListener("change", verificarFiltro2);
        });
    </script>
{% endblock %}


